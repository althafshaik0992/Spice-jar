<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Order Placed • The Spice Jar</title>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

    <style>
        :root {
            --green:#218838;
            --accent:#b7410e;
            --dark:#111827;
            --bg:#f0f8f0;
        }

        *{box-sizing:border-box;}

        body{
            margin:0;
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background:radial-gradient(circle at top,#dff5e6 0,#f6fbf6 40%,#f0f8f0 100%);
            color:#111827;
        }

        /* NAVBAR ---------------------------------------------------------------- */
        .navbar{
            background:#ffffffdd;
            padding:6px 6%;
            box-shadow:0 2px 6px rgba(0,0,0,.05);
            display:flex;
            justify-content:space-between;
            align-items:center;
            position:sticky;
            top:0;
            z-index:1000;
            height:60px;
            backdrop-filter:blur(10px);
        }
        .brand-logo{
            display:flex;
            align-items:center;
            gap:8px;
            text-decoration:none;
            color:var(--green);
            font-weight:700;
            font-size:20px;
        }
        .brand-logo video{
            width:36px;
            height:auto;
            border-radius:4px;
        }

        .nav-links{
            display:flex;
            align-items:center;
            gap:18px;
        }
        .nav-links a{
            text-decoration:none;
            color:#374151;
            font-weight:500;
            font-size:15px;
        }
        .nav-links a:hover{
            color:var(--green);
        }

        /* Dropdown */
        .dropdown{position:relative}
        .dropdown-toggle{
            background:none;
            border:none;
            cursor:pointer;
            font-size:15px;
            color:#374151;
            display:flex;
            align-items:center;
            gap:6px;
        }
        .dropdown-menu{
            display:none;
            position:absolute;
            right:0;
            top:100%;
            margin-top:4px;
            background:#fff;
            box-shadow:0 4px 10px rgba(0,0,0,.12);
            border-radius:8px;
            overflow:hidden;
            min-width:180px;
        }
        .dropdown:hover .dropdown-menu{display:block;}
        .dropdown-menu a,
        .dropdown-menu span{
            display:block;
            padding:10px 16px;
            text-decoration:none;
            color:#111827;
            white-space:nowrap;
            font-size:14px;
        }
        .dropdown-menu a:hover{background:#f3f4f6;}

        /* Cart badge */
        .cart-icon-container{
            position:relative;
            display:inline-block;
        }
        .cart-count-badge{
            position:absolute;
            top:-8px;
            right:-8px;
            background-color:var(--accent);
            color:#fff;
            border-radius:999px;
            padding:2px 6px;
            font-size:11px;
            font-weight:700;
            display:flex;
            align-items:center;
            justify-content:center;
            min-width:18px;
            height:18px;
            text-align:center;
        }

        /* LAYOUT ----------------------------------------------------------------- */
        .wrap{
            max-width:1100px;
            margin:28px auto 40px;
            padding:0 6%;
        }

        .success-head{
            display:flex;
            flex-wrap:wrap;
            align-items:center;
            gap:16px;
            margin:4px 0 8px;
        }
        .success-icon{
            width:56px;
            height:56px;
            border-radius:50%;
            background:var(--green);
            display:grid;
            place-items:center;
            color:#fff;
            font-size:24px;
            box-shadow:0 10px 24px rgba(0,0,0,.18);
        }
        .title{
            font-size:32px;
            line-height:1.1;
            color:var(--green);
            margin:0;
        }
        .subtitle{
            margin:6px 0 22px;
            color:#4b5563;
            font-size:14px;
        }

        .grid-cards{
            display:grid;
            grid-template-columns:repeat(4,1fr);
            gap:16px;
            margin-bottom:18px;
        }
        @media (max-width:1000px){
            .grid-cards{grid-template-columns:repeat(2,1fr);}
        }
        @media (max-width:640px){
            .grid-cards{grid-template-columns:1fr;}
        }

        .info{
            background:#ffffff;
            border-radius:12px;
            box-shadow:0 4px 12px rgba(0,0,0,.06);
            padding:14px 16px;
        }
        .info .label{
            font-size:11px;
            font-weight:700;
            color:#6b7280;
            letter-spacing:.08em;
            margin-bottom:6px;
            text-transform:uppercase;
        }
        .info .value{
            font-weight:700;
            color:#111827;
            font-size:15px;
            word-break:break-word;
        }

        /* SHIPPING + TIMELINE ---------------------------------------------------- */
        .two-col{
            display:grid;
            grid-template-columns:1.1fr 1.2fr;
            gap:16px;
            margin:4px 0 18px;
        }
        @media (max-width:860px){
            .two-col{grid-template-columns:1fr;}
        }

        .shipping-info{
            background:#fff;
            border-radius:12px;
            box-shadow:0 4px 12px rgba(0,0,0,.06);
            padding:16px 18px;
            text-align:center;
        }
        .shipping-info .label{
            font-size:11px;
            font-weight:700;
            color:#6b7280;
            text-transform:uppercase;
            letter-spacing:.08em;
            margin-bottom:4px;
        }
        .shipping-info .value{
            font-weight:700;
            color:var(--accent);
            font-size:18px;
        }
        .shipping-info .hint{
            font-size:12px;
            color:#6b7280;
            margin-top:4px;
        }

        .timeline{
            background:#fff;
            border-radius:12px;
            box-shadow:0 4px 12px rgba(0,0,0,.06);
            padding:18px 20px;
            position:relative;
            overflow:hidden;
        }
        .timeline h3{
            font-size:16px;
            font-weight:700;
            margin:0 0 12px;
            color:#111827;
        }
        .timeline-item{
            display:flex;
            align-items:flex-start;
            margin-bottom:18px;
            position:relative;
        }
        .timeline-item:last-child{margin-bottom:0;}
        .timeline-icon{
            width:30px;
            height:30px;
            border-radius:999px;
            background:#e5e7eb;
            color:#6b7280;
            display:grid;
            place-items:center;
            font-size:14px;
            z-index:1;
        }
        .timeline-content{
            margin-left:12px;
            flex:1;
        }
        .timeline-content h4{
            font-size:14px;
            font-weight:600;
            margin:0;
            color:#111827;
        }
        .timeline-content p{
            font-size:13px;
            color:#6b7280;
            margin:4px 0 0;
        }
        .timeline-item.active .timeline-icon{
            background:var(--green);
            color:#fff;
        }
        .timeline-item.active h4{
            color:var(--green);
        }
        .timeline-line{
            position:absolute;
            left:14px;
            top:36px;
            bottom:8px;
            width:2px;
            background:#e5e7eb;
        }

        /* ITEMS TABLE ------------------------------------------------------------ */
        .table-card{
            background:#fff;
            border-radius:12px;
            box-shadow:0 4px 12px rgba(0,0,0,.06);
            overflow:hidden;
            margin-top:8px;
        }
        table{
            width:100%;
            border-collapse:collapse;
            table-layout:fixed;
        }
        th,td{
            padding:12px 14px;
            border-bottom:1px solid #f3f4f6;
        }
        thead th{
            background:#f9fafb;
            font-weight:700;
            color:#4b5563;
            font-size:13px;
            text-align:left;
        }
        tbody td{vertical-align:middle;}
        .th-item{width:50%;}
        .td-item{
            white-space:normal;
            overflow-wrap:break-word;
            word-break:break-word;
        }
        .num{text-align:right;}
        @media (max-width:560px){
            .num{text-align:left;}
        }

        /* TOTALS ----------------------------------------------------------------- */
        .totals{
            background:#fff;
            border-radius:12px;
            box-shadow:0 4px 12px rgba(0,0,0,.06);
            padding:14px 16px;
            margin-top:16px;
        }
        .row{
            display:flex;
            justify-content:space-between;
            margin:6px 0;
            font-size:14px;
        }
        .row .label{color:#4b5563;}
        .row .value{
            min-width:120px;
            text-align:right;
            font-weight:600;
        }
        .row.total{
            font-weight:800;
            font-size:17px;
            margin-top:10px;
            border-top:1px dashed #e5e7eb;
            padding-top:8px;
        }

        /* ACTION LINKS ----------------------------------------------------------- */
        .links{
            display:flex;
            flex-wrap:wrap;
            gap:10px;
            margin-top:20px;
        }
        .btn{
            display:inline-flex;
            align-items:center;
            gap:10px;
            background:var(--green);
            color:#fff;
            text-decoration:none;
            padding:11px 18px;
            border-radius:999px;
            font-weight:600;
            font-size:14px;
            box-shadow:0 6px 14px rgba(0,0,0,.12);
        }
        .btn:hover{
            background:var(--accent);
        }

        /* FOOTER ----------------------------------------------------------------- */
        .site-footer{
            background:#111827;
            color:#9ca3af;
            padding:40px 6%;
            margin-top:40px;
        }
        .footer-container{
            display:flex;
            flex-wrap:wrap;
            justify-content:space-between;
            gap:30px;
            margin-bottom:24px;
        }
        .footer-column{
            flex:1;
            min-width:220px;
        }
        .footer-column h3{
            color:#fff;
            margin-bottom:14px;
            font-weight:600;
            border-bottom:2px solid var(--green);
            padding-bottom:6px;
            display:inline-block;
        }
        .footer-column p{
            line-height:1.6;
            font-size:14px;
        }
        .footer-column ul{
            list-style:none;
            padding:0;
            margin:0;
        }
        .footer-column ul li a{
            text-decoration:none;
            color:#d1d5db;
            display:block;
            padding:5px 0;
            font-size:14px;
            transition:color .25s;
        }
        .footer-column ul li a:hover{color:#fff;}
        .social-links a{
            color:#9ca3af;
            text-decoration:none;
            font-size:20px;
            margin-right:15px;
            transition:color .25s;
        }
        .social-links a:hover{color:var(--green);}
        .footer-bottom{
            text-align:center;
            padding-top:18px;
            border-top:1px solid #374151;
            font-size:13px;
        }
        @media (max-width:768px){
            .footer-container{
                flex-direction:column;
                text-align:center;
            }
            .footer-column{margin-bottom:18px;}
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <a href="/" class="brand-logo">
        <video src="/images/Spice-Jar.mp4" autoplay muted loop playsinline></video>
        <span>SpiceJar</span>
    </a>

    <div class="nav-links">
        <a th:href="@{/menu}">Menu</a>
        <a th:href="@{/about}">About Us</a>

        <a th:href="@{/cart/view}" class="nav-link">
            <div class="cart-icon-container" aria-live="polite" aria-label="Cart items">
                <i class="fas fa-shopping-cart" style="font-size:22px"></i>
                <span class="cart-count-badge" id="lblCartCount" th:text="${cartCount}">0</span>
            </div>
        </a>

        <a th:href="@{/contact}">Contact Us</a>

        <!-- Account -->
        <div class="dropdown">
            <button class="dropdown-toggle" type="button">
                <i class="fas fa-user"></i>
                <span th:text="${session.USER != null ? session.USER.firstName : 'Account'}">Account</span>
            </button>
            <div class="dropdown-menu">
                <a th:if="${session.USER == null}" th:href="@{/login}">Login</a>
                <a th:if="${session.USER == null}" th:href="@{/register}">Register</a>

                <span th:if="${session.USER != null}">
                    Welcome, <span th:text="${session.USER.firstName}">User</span>
                </span>
                <a th:if="${session.USER != null}" th:href="@{/account}">Your Account</a>
                <a th:if="${session.USER != null}" th:href="@{/orders}">My Orders</a>
                <a th:if="${session.USER != null}" th:href="@{/logout}">Logout</a>
            </div>
        </div>
    </div>
</nav>

<div class="wrap">
    <div class="success-head">
        <div class="success-icon"><i class="fa-solid fa-check"></i></div>
        <div>
            <h1 class="title">Order placed successfully!</h1>
            <p class="subtitle">
                We’ve received your order and will email you a confirmation shortly.
            </p>
        </div>
    </div>

    <!-- Top summary cards -->
    <section class="grid-cards">
        <div class="info">
            <div class="label">Order ID</div>
            <div class="value" th:text="${order.id}">12345</div>
        </div>
        <div class="info">
            <div class="label">Placed On</div>
            <div class="value"
                 th:text="${#temporals.format(order.createdAt, 'MMM d, yyyy • h:mm a')}">
                Aug 29, 2025 • 9:33 AM
            </div>
        </div>
        <div class="info">
            <div class="label">Customer</div>
            <div class="value" th:text="${order.customerName}">Customer Name</div>
        </div>
        <div class="info">
            <div class="label">Shipping Address</div>
            <div class="value"
                 th:text="${(order.street != null ? order.street + ', ' : '') +
                           (order.city   != null ? order.city   + ', ' : '') +
                           (order.state  != null ? order.state  + ' '  : '') +
                           (order.zip    != null ? order.zip           : '')}">
                123 Main St, City, ST 12345
            </div>
        </div>
    </section>

    <!-- Shipping ETA + Timeline -->
    <section class="two-col">
        <div class="shipping-info">
            <div class="label">Estimated Delivery</div>
            <div class="value">Within 5–7 business days</div>
            <div class="hint">You’ll receive tracking details by email once your order ships.</div>
        </div>

        <div class="timeline">
            <h3>Order Status</h3>
            <div class="timeline-line"></div>

            <div class="timeline-item active">
                <div class="timeline-icon">
                    <i class="fa-solid fa-circle-check"></i>
                </div>
                <div class="timeline-content">
                    <h4>Order Placed</h4>
                    <p>We’ve received your order and it’s being processed.</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-icon">
                    <i class="fa-solid fa-box"></i>
                </div>
                <div class="timeline-content">
                    <h4>Shipped</h4>
                    <p>Your items will be carefully packed and handed over to the courier.</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-icon">
                    <i class="fa-solid fa-truck-fast"></i>
                </div>
                <div class="timeline-content">
                    <h4>Out for Delivery</h4>
                    <p>The package is with the delivery partner and on the way to you.</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-icon">
                    <i class="fa-solid fa-house-chimney"></i>
                </div>
                <div class="timeline-content">
                    <h4>Delivered</h4>
                    <p>Enjoy your fresh spices! We hope they add magic to your meals.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Items table -->
    <section class="table-card">
        <table>
            <thead>
            <tr>
                <th class="th-item">Item</th>
                <th style="width:90px;">Qty</th>
                <th style="width:120px;">Price</th>
                <th style="width:140px;">Line Total</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="it : ${order.items}">
                <td class="td-item" th:text="${it.productName}">Spice</td>
                <td th:text="${it.quantity}">1</td>
                <td class="num"
                    th:text="'$ ' + ${#numbers.formatDecimal(it.price,1,'COMMA',2,'POINT')}">
                    $ 10.00
                </td>
                <td class="num"
                    th:text="'$ ' + ${#numbers.formatDecimal(it.lineTotal,1,'COMMA',2,'POINT')}">
                    $ 10.00
                </td>
            </tr>
            </tbody>
        </table>
    </section>

    <!-- Totals -->
    <section class="totals">
        <div class="row">
            <span class="label">Subtotal</span>
            <span class="value"
                  th:text="'$ ' + ${#numbers.formatDecimal(order.subtotal,1,'COMMA',2,'POINT')}">
                $ 0.00
            </span>
        </div>
        <div class="row">
            <span class="label">Tax (8%)</span>
            <span class="value"
                  th:text="'$ ' + ${#numbers.formatDecimal(order.tax,1,'COMMA',2,'POINT')}">
                $ 0.00
            </span>
        </div>
        <div class="row" th:if="${order.discount != null && order.discount > 0}">
            <span class="label">Discount</span>
            <span class="value"
                  th:text="'- $ ' + ${#numbers.formatDecimal(order.discount,1,'COMMA',2,'POINT')}">
                - $ 0.00
            </span>
        </div>
        <div class="row total">
            <span class="label">Total Paid</span>
            <span class="value"
                  th:text="'$ ' + ${#numbers.formatDecimal(order.grandTotal,1,'COMMA',2,'POINT')}">
                $ 0.00
            </span>
        </div>
    </section>

    <!-- Action buttons -->
    <div class="links">
        <a class="btn" th:href="@{/}">
            <i class="fa-solid fa-house"></i>
            <span>Back to Home</span>
        </a>
        <a class="btn" th:href="@{/orders}">
            <i class="fa-solid fa-receipt"></i>
            <span>View My Orders</span>
        </a>
        <a class="btn" href="javascript:void(0)" onclick="shareOrder()">
            <i class="fa-solid fa-share-nodes"></i>
            <span>Share Order</span>
        </a>
    </div>
</div>

<footer class="site-footer">
    <div class="footer-container">
        <div class="footer-column">
            <h3>About Spice Jar</h3>
            <p>
                Bringing the world's finest spices to your kitchen.
                Quality, aroma, and flavor guaranteed in every jar.
            </p>
        </div>
        <div class="footer-column">
            <h3>Quick Links</h3>
            <ul>
                <li><a th:href="@{/menu}">Menu</a></li>
                <li><a th:href="@{/about}">About Us</a></li>
                <li><a th:href="@{/contact}">Contact</a></li>
                <li><a href="#">FAQ</a></li>
            </ul>
        </div>
        <div class="footer-column">
            <h3>Connect With Us</h3>
            <div class="social-links">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="Pinterest"><i class="fab fa-pinterest"></i></a>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2025 The Spice Jar. All rights reserved.</p>
    </div>
</footer>

<script>
    function shareOrder() {
        if (navigator.share) {
            navigator.share({
                title: 'My Spice Jar Order',
                text: 'I just placed an order at The Spice Jar! Check out their amazing spices.',
                url: window.location.href
            }).catch(console.error);
        } else {
            prompt("Copy this link to share your order:", window.location.href);
        }
    }
</script>
</body>
</html>
