<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="utf-8" />
  <title>Checkout • The Spice Jar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root { --green:#218838; --accent:#b7410e; --dark:#111; --bg:#f6fbf6; --card:#fff; }
    * { box-sizing: border-box; }
    body { font-family:'Segoe UI',Tahoma,Arial; margin:0; background:var(--bg); color:#222; }

    .navbar{background:#fff; padding:8px 6%; box-shadow:0 2px 6px rgba(0,0,0,.05);
      display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; z-index:1000; height:60px}
    .brand{display:flex; align-items:center; gap:8px; text-decoration:none; color:var(--green); font-weight:800; font-size:20px}
    .brand video{width:36px; height:auto; border-radius:4px}
    .nav a{text-decoration:none; color:#333; margin-left:16px; font-weight:600}
    .nav a:hover{color:var(--green)}

    .wrap{max-width:1200px; margin:22px auto; padding:0 6%}
    h1{margin:0 0 18px; color:var(--green); font-size:28px}
    .grid{display:grid; grid-template-columns:1fr 420px; gap:28px}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} }

    .card{background:var(--card); border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.06); padding:18px}
    .card h2{font-size:18px; margin:0 0 12px; color:#333}

    .form-grid{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    .form-grid .full{grid-column:1 / -1}
    label{display:block; font-size:13px; color:#444; margin:4px 0 6px}
    input, select{width:100%; padding:11px 12px; border:1px solid #ddd; border-radius:8px; font-size:14px}
    .muted{color:#777; font-size:13px}

    .summary h3{margin:0 0 12px; color:#333}
    .row{display:flex; justify-content:space-between; margin:8px 0}
    .row.total{font-size:18px; font-weight:800}

    .btn-primary{display:inline-flex; align-items:center; gap:10px; background:var(--green); color:#fff; border:none;
      padding:14px 18px; border-radius:10px; font-weight:800; cursor:pointer; width:100%; justify-content:center; font-size:16px}
    .btn-primary:hover{background:var(--accent)}
    .links{margin-top:10px; text-align:center}
    .links a{color:#218838; text-decoration:none}
  </style>
</head>
<body>

<nav class="navbar">
  <a th:href="@{/}" class="brand">
    <video th:src="@{/images/Spice-Jar.mp4}" autoplay muted loop playsinline></video>
    <span>SpiceJar</span>
  </a>
  <div class="nav">
    <a th:href="@{/}">Home</a>
    <a th:href="@{/products}">Products</a>
    <a th:href="@{/cart/view}">Cart</a>
    <a th:href="@{/orders}">My Orders</a>
  </div>
</nav>

<main class="wrap">
  <h1>Secure checkout</h1>

  <!-- SUBMITS to /order/place -->
  <form th:action="@{/order/place}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <div class="grid">
      <!-- Left: Shipping & Contact -->
      <section class="card">
        <h2>Shipping & Contact</h2>
        <div class="form-grid">

          <div class="full">
            <label>Full name</label>
            <input name="customerName" placeholder="e.g., Priya Sharma" required>
          </div>

          <div>
            <label>Email</label>
            <input name="email" type="email" required>
          </div>
          <div>
            <label>Phone</label>
            <input name="phone" type="tel" required>
          </div>

          <div class="full">
            <label>Street address</label>
            <input name="street" placeholder="123 Main St, Apt 4B" required>
          </div>

          <div>
            <label>City</label>
            <input name="city" required>
          </div>
          <div>
            <label>State</label>
            <input name="state" required>
          </div>
          <div>
            <label>ZIP</label>
            <input name="zip" required>
          </div>
          <div>
            <label>Country</label>
            <select name="country" required>
              <option value="" disabled selected>Select</option>
              <option>United States</option>
              <option>Canada</option>
              <option>United Kingdom</option>
              <option>India</option>
              <option>Australia</option>
            </select>
          </div>

        </div>

        <p class="muted" style="margin-top:10px">
          <i class="fa-solid fa-lock"></i> Payments are processed securely.
        </p>
      </section>

      <!-- Right: Order summary -->
      <aside class="card">
        <h2>Order summary</h2>

        <div class="row">
          <span>Items</span>
          <span th:text="${cart.items.size()}">0</span>
        </div>

        <div class="row">
          <span>Subtotal</span>
          <span th:text="${#numbers.formatDecimal(cart.subtotal,1,'COMMA',2,'POINT')}">$0.00</span>
        </div>

        <div class="row">
          <span>Tax (8%)</span>
          <span th:text="${#numbers.formatDecimal(cart.tax,1,'COMMA',2,'POINT')}">$0.00</span>
        </div>

        <div class="row total">
          <span>Total</span>
          <span th:text="${#numbers.formatDecimal(cart.grandTotal,1,'COMMA',2,'POINT')}">$0.00</span>
        </div>

        <!-- Submit -> OrderController.placeOrder -> redirect:/payment/checkout?orderId=... -->

        <button type="submit" class="btn-primary" style="margin-top:14px"
                onclick="this.disabled=true; this.innerText='Processing…'; this.form.submit();">
          <i class="fa-solid fa-arrow-right"></i> Continue to payment
        </button>

        <div class="links">
          <a th:href="@{/cart/view}">Back to cart</a>
        </div>
      </aside>
    </div>
  </form>
</main>

<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-column">
      <h3>About Spice Jar</h3>
      <p>Bringing the world's finest spices to your kitchen. Quality, aroma, and flavor guaranteed in every jar.</p>
    </div>
    <div class="footer-column">
      <h3>Quick Links</h3>
      <ul>
        <li><a th:href="@{/menu}">Menu</a></li>
        <li><a th:href="@{/about}">About Us</a></li>
        <li><a th:href="@{/contact}">Contact</a></li>
        <li><a href="#">FAQ</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h3>Connect With Us</h3>
      <div class="social-links">
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="Pinterest"><i class="fab fa-pinterest"></i></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 The Spice Jar. All rights reserved.</p>
  </div>
</footer>
</body>
</html>
