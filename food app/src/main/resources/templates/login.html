<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Spice Jar • Login</title>

  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='16' fill='%23218838'/%3E%3Cpath fill='%23fff' d='M10 21c0-4.2 5-4.2 5-8 0-1.4-.8-2.6-2-3.5 3 .3 5 2.2 5 4.7 0 3.6-4 4.6-4 7.8h6v1.5H10V21z'/%3E%3C/svg%3E">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <style>
    :root{
      --green:#218838;
      --accent:#b7410e;
      --bg:#f0f8f0;
      --ink:#111;
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:radial-gradient(circle at top left,#e0f5e5 0,#f6fbf6 40%,#f0f8f0 100%);
      color:var(--ink);
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* Navbar (aligned with other pages) */
    .navbar{
      background:#fff;
      padding:6px 6%;
      box-shadow:0 2px 6px rgba(0,0,0,.05);
      display:flex;
      justify-content:space-between;
      align-items:center;
      position:sticky;
      top:0;
      z-index:1000;
      height:60px;
    }
    .brand-logo{
      display:flex;
      align-items:center;
      gap:8px;
      text-decoration:none;
      color:var(--green);
      font-weight:700;
      font-size:20px;
    }
    .brand-logo video{
      width:36px;
      height:auto;
      border-radius:4px;
    }
    .nav-links{
      display:flex;
      align-items:center;
      gap:18px;
    }
    .nav-links a{
      text-decoration:none;
      color:#333;
      font-weight:500;
      font-size:15px;
    }
    .nav-links a:hover{color:var(--green);}

    /* Cart badge (same as other pages) */
    .cart-icon-container{
      position:relative;
      display:inline-block;
    }
    .cart-count-badge{
      position:absolute;
      top:-8px;
      right:-8px;
      background-color:var(--accent);
      color:#fff;
      border-radius:50%;
      padding:2px 6px;
      font-size:12px;
      font-weight:bold;
      display:flex;
      align-items:center;
      justify-content:center;
      min-width:20px;
      height:20px;
    }

    /* Dropdown */
    .dropdown{position:relative;}
    .dropdown-toggle{
      background:none;
      border:none;
      cursor:pointer;
      font-size:15px;
      color:#333;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .dropdown-menu{
      display:none;
      position:absolute;
      right:0;
      top:100%;
      background:#fff;
      box-shadow:0 4px 10px rgba(0,0,0,.1);
      border-radius:6px;
      overflow:hidden;
      min-width:180px;
    }
    .dropdown:hover .dropdown-menu{display:block;}
    .dropdown-menu a,
    .dropdown-menu span{
      display:block;
      padding:10px 16px;
      text-decoration:none;
      color:#333;
      white-space:nowrap;
      font-size:14px;
    }
    .dropdown-menu a:hover{background:#f4f4f4;}

    /* Auth layout */
    .auth-shell{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px 16px;
    }
    .auth-box{
      background:#fff;
      padding:26px 26px 28px;
      border-radius:16px;
      box-shadow:0 14px 40px rgba(0,0,0,.12);
      width:100%;
      max-width:400px;
    }
    .auth-header{
      text-align:center;
      margin-bottom:18px;
    }
    .auth-header h1{
      margin:0 0 6px;
      font-size:24px;
      color:var(--green);
    }
    .auth-header p{
      margin:0;
      font-size:13px;
      color:#64748b;
    }

    form{
      display:flex;
      flex-direction:column;
      gap:14px;
      margin-top:6px;
    }
    .form-group{
      display:flex;
      flex-direction:column;
      gap:6px;
      text-align:left;
    }
    label{
      font-size:13px;
      font-weight:600;
      color:#374151;
    }
    input[type="text"],
    input[type="password"]{
      padding:11px 12px;
      border-radius:10px;
      border:1px solid #d1d5db;
      font-size:14px;
      transition:border-color .2s, box-shadow .2s;
      width:100%;
    }
    input[type="text"]:focus,
    input[type="password"]:focus{
      outline:none;
      border-color:var(--green);
      box-shadow:0 0 0 2px rgba(33,136,56,.18);
    }

    button[type="submit"]{
      margin-top:4px;
      background:var(--green);
      color:#fff;
      padding:11px 18px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-weight:700;
      font-size:15px;
      width:100%;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      box-shadow:0 8px 22px rgba(0,0,0,.15);
    }
    button[type="submit"]:hover{
      background:var(--accent);
    }

    .pass{
      text-align:right;
      font-size:13px;
      margin-top:-4px;
    }
    .pass a{
      color:var(--green);
      text-decoration:none;
      font-weight:500;
    }
    .pass a:hover{text-decoration:underline;}

    .alert-error{
      background:#fef2f2;
      color:#991b1b;
      padding:9px 11px;
      border-radius:8px;
      font-size:13px;
      border:1px solid #fecaca;
    }
    .error{
      color:#b91c1c;
      font-size:13px;
      margin-top:6px;
      text-align:center;
    }

    .auth-box p{
      margin:10px 0 0;
      font-size:13px;
      text-align:center;
      color:#4b5563;
    }
    .auth-box p a{
      color:var(--green);
      font-weight:600;
      text-decoration:none;
    }
    .auth-box p a:hover{text-decoration:underline;}

    /* Social login */
    .social-divider{
      display:flex;
      align-items:center;
      gap:8px;
      margin:18px 0 10px;
      font-size:12px;
      color:#9ca3af;
    }
    .social-divider::before,
    .social-divider::after{
      content:"";
      flex:1;
      height:1px;
      background:#e5e7eb;
    }

    .social-buttons{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:4px;
    }
    .social-btn{
      display:flex;
      align-items:center;
      justify-content:center;
      padding:9px 12px;
      border-radius:999px;
      text-decoration:none;
      font-weight:600;
      color:#fff;
      font-size:14px;
      gap:8px;
      box-shadow:0 4px 14px rgba(0,0,0,.12);
    }
    .social-btn i{font-size:16px;}
    .social-btn.google{background:#DB4437;}
    .social-btn.google:hover{background:#c43c2c;}
    .social-btn.facebook{background:#4267B2;}
    .social-btn.facebook:hover{background:#365899;}

    /* Footer (same pattern as other pages) */
    .site-footer{
      background:#222;
      color:#ccc;
      padding:32px 6% 18px;
      margin-top:24px;
    }
    .footer-container{
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      gap:30px;
      margin-bottom:20px;
    }
    .footer-column{
      flex:1;
      min-width:220px;
    }
    .footer-column h3{
      color:#fff;
      margin-bottom:12px;
      font-weight:600;
      border-bottom:2px solid var(--green);
      padding-bottom:6px;
      display:inline-block;
      font-size:15px;
    }
    .footer-column p{
      line-height:1.6;
      font-size:13px;
    }
    .footer-column ul{
      list-style:none;
      padding:0;
      margin:0;
      font-size:13px;
    }
    .footer-column ul li a{
      text-decoration:none;
      color:#ccc;
      display:block;
      padding:4px 0;
      transition:color .2s;
    }
    .footer-column ul li a:hover{color:#fff;}
    .social-links a{
      color:#ccc;
      text-decoration:none;
      font-size:18px;
      margin-right:12px;
      transition:color .2s;
    }
    .social-links a:hover{color:var(--green);}
    .footer-bottom{
      text-align:center;
      padding-top:10px;
      border-top:1px solid #444;
      font-size:12px;
    }

    @media (max-width:768px){
      .footer-container{
        flex-direction:column;
        text-align:center;
      }
      .auth-box{
        margin-top:8px;
      }
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <a href="/" class="brand-logo">
    <video src="/images/Spice-Jar.mp4" autoplay muted loop playsinline></video>
    <span>SpiceJar</span>
  </a>

  <div class="nav-links">
    <a th:href="@{/menu}">Menu</a>
    <a th:href="@{/about}">About Us</a>
    <a class="nav-link" th:href="@{/cart/view}">
      <div class="cart-icon-container" aria-live="polite" aria-label="Cart items">
        <i class="fas fa-shopping-cart" style="font-size:24px"></i>
        <span class="cart-count-badge" id="lblCartCount" th:text="${cartCount}">0</span>
      </div>
    </a>
    <a th:href="@{/contact}">Contact Us</a>

    <!-- Account -->
    <div class="dropdown">
      <button class="dropdown-toggle" type="button">
        <i class="fas fa-user"></i>
        <span th:text="${session.USER != null ? session.USER.firstName : 'Account'}">Account</span>
      </button>
      <div class="dropdown-menu">
        <a th:if="${session.USER == null}" th:href="@{/login}">Login</a>
        <a th:if="${session.USER == null}" th:href="@{/register}">Register</a>

        <span th:if="${session.USER != null}">
          Welcome, <strong th:text="${session.USER.firstName}">User</strong>
        </span>
        <a th:if="${session.USER != null}" th:href="@{/account}">Your Account</a>
        <a th:if="${session.USER != null}" th:href="@{/logout}">Logout</a>
      </div>
    </div>
  </div>
</nav>

<!-- Auth content -->
<main class="auth-shell">
  <div class="auth-box">
    <div class="auth-header">
      <h1>Login</h1>
      <p>Welcome back! Sign in to continue your Spice Jar journey.</p>
    </div>

    <form th:action="@{/login}" method="post">
      <input type="hidden" name="return" th:value="${returnUrl}">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

      <div class="form-group">
        <label for="username">Email or Username</label>
        <input name="username" id="username" placeholder="you@example.com" required/>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input name="password" id="password" type="password" placeholder="••••••••" required/>
      </div>

      <div th:if="${param.error}" class="alert-error">
        Invalid username or password.
      </div>

      <div class="pass">
        <a th:href="@{/forgotPassword}">Forgot your password?</a>
      </div>

      <button type="submit">
        <i class="fa-solid fa-right-to-bracket"></i>
        <span>Login</span>
      </button>
    </form>

    <p>
      Don’t have an account?
      <a th:href="@{/register}">Create one</a>
    </p>
    <p th:if="${error}" class="error" th:text="${error}"></p>

    <div class="social-divider">
      <span>or continue with</span>
    </div>

    <div class="social-buttons">
      <a th:href="@{/oauth2/authorization/google}" class="social-btn google">
        <i class="fab fa-google"></i>
        <span>Login with Google</span>
      </a>

      <a th:href="@{/oauth2/authorization/facebook}" class="social-btn facebook">
        <i class="fab fa-facebook-f"></i>
        <span>Login with Facebook</span>
      </a>
    </div>
  </div>
</main>

<!-- Footer -->
<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-column">
      <h3>About Spice Jar</h3>
      <p>Bringing the world's finest spices to your kitchen. Quality, aroma, and flavor guaranteed in every jar.</p>
    </div>
    <div class="footer-column">
      <h3>Quick Links</h3>
      <ul>
        <li><a th:href="@{/menu}">Menu</a></li>
        <li><a th:href="@{/about}">About Us</a></li>
        <li><a th:href="@{/contact}">Contact</a></li>
        <li><a href="#">FAQ</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h3>Connect With Us</h3>
      <div class="social-links">
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="Pinterest"><i class="fab fa-pinterest"></i></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 The Spice Jar. All rights reserved.</p>
  </div>
</footer>

</body>
</html>
