<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>My Profile • The Spice Jar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <style>
        :root {
            --green:#218838;
            --accent:#b7410e;
            --bg:#f6fbf6;
            --card:#ffffffd9;
            --muted:#6b7280;
            --shadow:0 10px 25px rgba(0,0,0,.06);
        }
        *{box-sizing:border-box;margin:0;padding:0}
        body{
            font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
            background:linear-gradient(160deg,#f6fbf6,#fff8f5);
            color:#111;
            line-height:1.6;
        }

        /* Navbar */
        .navbar{
            background:#fff;
            padding:10px 6%;
            box-shadow:0 2px 6px rgba(0,0,0,.05);
            display:flex;justify-content:space-between;align-items:center;
            position:sticky;top:0;z-index:1000;height:60px;
        }
        .brand-logo{
            display:flex;align-items:center;gap:8px;
            text-decoration:none;color:var(--green);
            font-weight:700;font-size:20px;
        }
        .brand-logo video{width:36px;border-radius:4px}
        .nav-links{display:flex;align-items:center;gap:18px}
        .nav-links a{
            text-decoration:none;color:#333;font-weight:500;font-size:15px;
            transition:color .2s;
        }
        .nav-links a:hover{color:var(--green)}
        .cart-icon-container{position:relative}
        .cart-count-badge{
            position:absolute;top:-8px;right:-8px;
            background:var(--accent);color:white;border-radius:50%;
            min-width:20px;height:20px;display:flex;align-items:center;justify-content:center;
            font-size:12px;font-weight:700;
        }

        /* Cover */
        .cover{
            background:linear-gradient(135deg,#22c55e33,#b7410e33),url('/images/spices-about.jpeg') center/cover;
            height:220px;
            border-radius:0 0 40px 40px;
            position:relative;
            overflow:hidden;
        }
        .cover::after{
            content:"";position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.1),rgba(0,0,0,.2));
        }

        /* Profile Card */
        .wrap{max-width:940px;margin:-80px auto 0;padding:0 6%;}
        .card{
            background:var(--card);
            backdrop-filter:blur(10px);
            border-radius:20px;
            box-shadow:var(--shadow);
            padding:24px;
            animation:fadeIn .6s ease-in-out;
        }
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
        .top{display:flex;gap:20px;align-items:center;flex-wrap:wrap;}
        .avatar,.placeholder{
            width:120px;height:120px;border-radius:50%;
            border:3px solid #fff;box-shadow:0 6px 16px rgba(0,0,0,.12);
            display:grid;place-items:center;background:#f4f4f4;overflow:hidden;
        }
        .avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%;}
        .placeholder i{font-size:42px;color:#888;}
        .top h2{margin:0;font-size:26px;color:#222;}
        .top small{color:#555;font-size:15px;}

        /* Info Grid */
        .grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
            gap:14px;margin-top:22px;
        }
        .field{
            background:#fafafa;
            border:1px solid #e8e8e8;
            border-radius:12px;
            padding:14px;
            transition:all .25s;
        }
        .field:hover{background:#fff;box-shadow:0 3px 12px rgba(0,0,0,.05);}
        .label{font-weight:700;color:#444;font-size:14px;margin-bottom:3px;}
        .value{color:#111;font-size:15px;}

        /* Edit Button */
        .actions{margin-top:20px;text-align:right;}
        .btn{
            display:inline-flex;align-items:center;gap:8px;
            border:none;border-radius:10px;padding:10px 16px;
            font-weight:700;cursor:pointer;text-decoration:none;
            transition:all .25s;
        }

        /* Dropdowns */
        .dropdown{ position:relative }
        .dropdown-toggle{ background:none; border:none; cursor:pointer; font-size:15px; color:#333; display:flex; align-items:center; gap:6px }
        .dropdown-menu{ display:none; position:absolute; right:0; top:100%; background:#fff; box-shadow:0 4px 10px rgba(0,0,0,.1); border-radius:6px; overflow:hidden; min-width:180px }
        .dropdown:hover .dropdown-menu{ display:block }
        .dropdown-menu a, .dropdown-menu span{ display:block; padding:10px 16px; text-decoration:none; color:#333; white-space:nowrap }
        .dropdown-menu a:hover{ background:#f4f4f4 }
        .btn-primary{
            background:var(--green);color:#fff;
            box-shadow:0 4px 10px rgba(33,136,56,.25);
        }
        .btn-primary:hover{background:var(--accent);transform:translateY(-2px);}

        /* Footer */
        footer{
            background:#0d1410;
            color:#ccc;
            padding:50px 6% 20px;
            margin-top:60px;
        }
        .footer-container{
            display:flex;flex-wrap:wrap;justify-content:space-between;gap:40px;margin-bottom:30px;
        }
        .footer-column{flex:1;min-width:240px;}
        .footer-column h3{
            color:#fff;font-weight:600;margin-bottom:16px;position:relative;padding-bottom:6px;
        }
        .footer-column h3::after{
            content:"";position:absolute;left:0;bottom:0;width:40px;height:3px;background:var(--green);
        }
        .footer-column p{line-height:1.6;font-size:14px;}
        .footer-column ul{list-style:none;padding:0;margin:0;}
        .footer-column ul li a{
            text-decoration:none;color:#bbb;font-size:14px;display:block;padding:5px 0;
            transition:color .25s;
        }
        .footer-column ul li a:hover{color:var(--green);}
        .social-links a{
            color:#bbb;font-size:20px;margin-right:15px;text-decoration:none;transition:color .25s;
        }
        .social-links a:hover{color:var(--accent);}
        .footer-bottom{
            text-align:center;border-top:1px solid #333;padding-top:20px;font-size:14px;color:#888;
        }

        @media (max-width:760px){
            .top{justify-content:center;text-align:center;}
            .actions{text-align:center;}
        }
    </style>
</head>
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <a href="/" class="brand-logo">
        <video src="/images/Spice-Jar.mp4" autoplay muted loop playsinline></video>
        <span>SpiceJar</span>
    </a>

    <div class="nav-links">
        <a th:href="@{/menu}">Menu</a>
        <a th:href="@{/about}">About Us</a>
        <a class="nav-link" th:href="@{/cart/view}">
            <div class="cart-icon-container" aria-live="polite" aria-label="Cart items">
                <i class="fas fa-shopping-cart" style="font-size:24px"></i>
                <span class="cart-count-badge" id="lblCartCount" th:text="${cartCount}">0</span>
            </div>
        </a>
        <a th:href="@{/contact}">Contact Us</a>



        <!-- Account -->
        <div class="dropdown">
            <button class="dropdown-toggle">
                <i class="fas fa-user"></i>
                <span th:text="${session.USER != null ? session.USER.firstName : 'Account'}">Account</span>
            </button>
            <div class="dropdown-menu">
                <a th:if="${session.USER == null}" th:href="@{/login}">Login</a>
                <a th:if="${session.USER == null}" th:href="@{/register}">Register</a>

                <span th:if="${session.USER != null}">
          Welcome, <strong th:text="${session.USER.firstName}">User</strong>
        </span>
                <a th:if="${session.USER != null}" th:href="@{/account}">Your Account</a>
                <a th:if="${session.USER != null}" th:href="@{/orders}">My Orders</a>
                <a th:if="${session.USER != null}" th:href="@{/logout}">Logout</a>
            </div>
        </div>
    </div>
</nav>


<div class="cover"></div>

<!-- Profile Section -->
<div class="wrap">
    <section class="card">
        <div class="top">
            <div class="avatar" th:if="${user.avatarUrl != null and !#strings.isEmpty(user.avatarUrl)}">
                <img th:src="@{${user.avatarUrl}}" alt="Avatar"/>
            </div>
            <div class="placeholder" th:if="${user.avatarUrl == null or #strings.isEmpty(user.avatarUrl)}">
                <i class="fa-regular fa-user"></i>
            </div>
            <div>
                <h2 th:text="${user.firstName + ' ' + user.lastName}">Your Name</h2>
                <small th:text="${user.email}">you@example.com</small>
            </div>
        </div>

        <div class="grid">
            <div class="field"><div class="label">Phone</div><div class="value" th:text="${user.phone}">—</div></div>
            <div class="field"><div class="label">Username</div><div class="value" th:text="${user.username}">—</div></div>
            <div class="field"><div class="label">Address</div><div class="value" th:text="${user.address}">—</div></div>
            <div class="field"><div class="label">City</div><div class="value" th:text="${user.city}">—</div></div>
            <div class="field"><div class="label">State</div><div class="value" th:text="${user.state}">—</div></div>
            <div class="field"><div class="label">Country</div><div class="value" th:text="${user.country}">—</div></div>
            <div class="field"><div class="label">Zip</div><div class="value" th:text="${user.zip}">—</div></div>
        </div>

        <div class="actions">
            <a class="btn btn-primary" th:href="@{/profile}">
                <i class="fa-solid fa-pen"></i> Edit Profile
            </a>
        </div>
    </section>
</div>

<!-- Footer -->
<footer>
    <div class="footer-container">
        <div class="footer-column">
            <h3>About Spice Jar</h3>
            <p>Bringing the world's finest spices to your kitchen — freshness, aroma, and authenticity sealed in every jar.</p>
        </div>
        <div class="footer-column">
            <h3>Quick Links</h3>
            <ul>
                <li><a th:href="@{/menu}">Menu</a></li>
                <li><a th:href="@{/about}">About Us</a></li>
                <li><a th:href="@{/contact}">Contact</a></li>
                <li><a href="#">FAQ</a></li>
            </ul>
        </div>
        <div class="footer-column">
            <h3>Follow Us</h3>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-pinterest"></i></a>
            </div>
        </div>
    </div>
    <div class="footer-bottom">© 2025 The Spice Jar • All rights reserved.</div>
</footer>
</body>
</html>
